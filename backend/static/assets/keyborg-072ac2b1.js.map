{"version":3,"file":"keyborg-072ac2b1.js","sources":["../../../frontend/node_modules/keyborg/dist/keyborg.esm.js"],"sourcesContent":["/*!\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\n// IE11 compat, checks if WeakRef is supported\nconst _canUseWeakRef = typeof WeakRef !== \"undefined\";\n/**\r\n * WeakRef wrapper around a HTMLElement that also supports IE11\r\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakRef}\r\n * @internal\r\n */\n\nclass WeakRefInstance {\n  constructor(instance) {\n    if (_canUseWeakRef && typeof instance === \"object\") {\n      this._weakRef = new WeakRef(instance);\n    } else {\n      this._instance = instance;\n    }\n  }\n  /**\r\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakRef/deref}\r\n   */\n\n\n  deref() {\n    var _a, _b, _c;\n\n    let instance;\n\n    if (this._weakRef) {\n      instance = (_a = this._weakRef) === null || _a === void 0 ? void 0 : _a.deref();\n\n      if (!instance) {\n        delete this._weakRef;\n      }\n    } else {\n      instance = this._instance;\n\n      if ((_c = (_b = instance) === null || _b === void 0 ? void 0 : _b.isDisposed) === null || _c === void 0 ? void 0 : _c.call(_b)) {\n        delete this._instance;\n      }\n    }\n\n    return instance;\n  }\n\n}\n\n/*!\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\nconst KEYBORG_FOCUSIN = \"keyborg:focusin\";\n\nfunction canOverrideNativeFocus(win) {\n  const HTMLElement = win.HTMLElement;\n  const origFocus = HTMLElement.prototype.focus;\n  let isCustomFocusCalled = false;\n\n  HTMLElement.prototype.focus = function focus() {\n    isCustomFocusCalled = true;\n  };\n\n  const btn = win.document.createElement(\"button\");\n  btn.focus();\n  HTMLElement.prototype.focus = origFocus;\n  return isCustomFocusCalled;\n}\n\nlet _canOverrideNativeFocus = false;\n/**\r\n * Guarantees that the native `focus` will be used\r\n */\n\nfunction nativeFocus(element) {\n  const focus = element.focus;\n\n  if (focus.__keyborgNativeFocus) {\n    focus.__keyborgNativeFocus.call(element);\n  } else {\n    element.focus();\n  }\n}\n/**\r\n * Overrides the native `focus` and setups the keyborg focus event\r\n */\n\nfunction setupFocusEvent(win) {\n  const kwin = win;\n\n  if (!_canOverrideNativeFocus) {\n    _canOverrideNativeFocus = canOverrideNativeFocus(kwin);\n  }\n\n  const origFocus = kwin.HTMLElement.prototype.focus;\n\n  if (origFocus.__keyborgNativeFocus) {\n    // Already set up.\n    return;\n  }\n\n  kwin.HTMLElement.prototype.focus = focus;\n  const data = kwin.__keyborgData = {\n    focusInHandler: e => {\n      var _a;\n\n      const target = e.target;\n\n      if (!target) {\n        return;\n      }\n\n      const event = document.createEvent(\"HTMLEvents\");\n      event.initEvent(KEYBORG_FOCUSIN, true, true);\n      const details = {\n        relatedTarget: e.relatedTarget || undefined\n      };\n\n      if (_canOverrideNativeFocus || data.lastFocusedProgrammatically) {\n        details.isFocusedProgrammatically = target === ((_a = data.lastFocusedProgrammatically) === null || _a === void 0 ? void 0 : _a.deref());\n        data.lastFocusedProgrammatically = undefined;\n      }\n\n      event.details = details;\n      target.dispatchEvent(event);\n    }\n  };\n  kwin.document.addEventListener(\"focusin\", kwin.__keyborgData.focusInHandler, true);\n\n  function focus() {\n    const keyborgNativeFocusEvent = kwin.__keyborgData;\n\n    if (keyborgNativeFocusEvent) {\n      keyborgNativeFocusEvent.lastFocusedProgrammatically = new WeakRefInstance(this);\n    } // eslint-disable-next-line prefer-rest-params\n\n\n    return origFocus.apply(this, arguments);\n  }\n\n  focus.__keyborgNativeFocus = origFocus;\n}\n/**\r\n * Removes keyborg event listeners and custom focus override\r\n * @param win The window that stores keyborg focus events\r\n */\n\nfunction disposeFocusEvent(win) {\n  const kwin = win;\n  const proto = kwin.HTMLElement.prototype;\n  const origFocus = proto.focus.__keyborgNativeFocus;\n  const keyborgNativeFocusEvent = kwin.__keyborgData;\n\n  if (keyborgNativeFocusEvent) {\n    kwin.document.removeEventListener(\"focusin\", keyborgNativeFocusEvent.focusInHandler, true);\n    delete kwin.__keyborgData;\n  }\n\n  if (origFocus) {\n    proto.focus = origFocus;\n  }\n}\n/**\r\n * @param win The window that stores keyborg focus events\r\n * @returns The last element focused with element.focus()\r\n */\n\nfunction getLastFocusedProgrammatically(win) {\n  var _a;\n\n  const keyborgNativeFocusEvent = win.__keyborgData;\n  return keyborgNativeFocusEvent ? ((_a = keyborgNativeFocusEvent.lastFocusedProgrammatically) === null || _a === void 0 ? void 0 : _a.deref()) || null : undefined;\n}\n\n/*!\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\nconst _dismissTimeout = 500; // When a key from dismissKeys is pressed and the focus is not moved\n// during _dismissTimeout time, dismiss the keyboard navigation mode.\n\nlet _lastId = 0;\n/**\r\n * Source of truth for all the keyborg core instances and the current keyboard navigation state\r\n */\n\nclass KeyborgState {\n  constructor() {\n    this.__keyborgCoreRefs = {};\n    this._isNavigatingWithKeyboard = false;\n  }\n\n  add(keyborg) {\n    const id = keyborg.id;\n\n    if (!(id in this.__keyborgCoreRefs)) {\n      this.__keyborgCoreRefs[id] = new WeakRefInstance(keyborg);\n    }\n  }\n\n  remove(id) {\n    delete this.__keyborgCoreRefs[id];\n\n    if (Object.keys(this.__keyborgCoreRefs).length === 0) {\n      this._isNavigatingWithKeyboard = false;\n    }\n  }\n\n  setVal(isNavigatingWithKeyboard) {\n    if (this._isNavigatingWithKeyboard === isNavigatingWithKeyboard) {\n      return;\n    }\n\n    this._isNavigatingWithKeyboard = isNavigatingWithKeyboard;\n\n    for (const id of Object.keys(this.__keyborgCoreRefs)) {\n      const ref = this.__keyborgCoreRefs[id];\n      const keyborg = ref.deref();\n\n      if (keyborg) {\n        keyborg.update(isNavigatingWithKeyboard);\n      } else {\n        this.remove(id);\n      }\n    }\n  }\n\n  getVal() {\n    return this._isNavigatingWithKeyboard;\n  }\n\n}\n\nconst _state = /*#__PURE__*/new KeyborgState();\n/**\r\n * Manages a collection of Keyborg instances in a window/document and updates keyborg state\r\n */\n\n\nclass KeyborgCore {\n  constructor(win, props) {\n    this._isMouseUsed = false;\n\n    this._onFocusIn = e => {\n      if (this._isMouseUsed) {\n        this._isMouseUsed = false;\n        return;\n      }\n\n      if (_state.getVal()) {\n        return;\n      }\n\n      const details = e.details;\n\n      if (!details.relatedTarget) {\n        return;\n      }\n\n      if (details.isFocusedProgrammatically || details.isFocusedProgrammatically === undefined) {\n        // The element is focused programmatically, or the programmatic focus detection\n        // is not working.\n        return;\n      }\n\n      _state.setVal(true);\n    };\n\n    this._onMouseDown = e => {\n      if (e.buttons === 0 || e.clientX === 0 && e.clientY === 0 && e.screenX === 0 && e.screenY === 0) {\n        // This is most likely an event triggered by the screen reader to perform\n        // an action on an element, do not dismiss the keyboard navigation mode.\n        return;\n      }\n\n      this._isMouseUsed = true;\n\n      _state.setVal(false);\n    };\n\n    this._onKeyDown = e => {\n      var _a;\n\n      const isNavigatingWithKeyboard = _state.getVal();\n\n      const keyCode = e.keyCode;\n      const triggerKeys = this._triggerKeys;\n\n      if (!isNavigatingWithKeyboard && (!triggerKeys || triggerKeys.has(keyCode))) {\n        _state.setVal(true);\n      } else if (isNavigatingWithKeyboard && ((_a = this._dismissKeys) === null || _a === void 0 ? void 0 : _a.has(keyCode))) {\n        this._scheduleDismiss();\n      }\n    };\n\n    this.id = \"c\" + ++_lastId;\n    this._win = win;\n    const doc = win.document;\n\n    if (props) {\n      const triggerKeys = props.triggerKeys;\n      const dismissKeys = props.dismissKeys;\n\n      if (triggerKeys === null || triggerKeys === void 0 ? void 0 : triggerKeys.length) {\n        this._triggerKeys = new Set(triggerKeys);\n      }\n\n      if (dismissKeys === null || dismissKeys === void 0 ? void 0 : dismissKeys.length) {\n        this._dismissKeys = new Set(dismissKeys);\n      }\n    }\n\n    doc.addEventListener(KEYBORG_FOCUSIN, this._onFocusIn, true); // Capture!\n\n    doc.addEventListener(\"mousedown\", this._onMouseDown, true); // Capture!\n\n    win.addEventListener(\"keydown\", this._onKeyDown, true); // Capture!\n\n    setupFocusEvent(win);\n\n    _state.add(this);\n  }\n\n  dispose() {\n    const win = this._win;\n\n    if (win) {\n      if (this._dismissTimer) {\n        win.clearTimeout(this._dismissTimer);\n        this._dismissTimer = undefined;\n      }\n\n      disposeFocusEvent(win);\n      const doc = win.document;\n      doc.removeEventListener(KEYBORG_FOCUSIN, this._onFocusIn, true); // Capture!\n\n      doc.removeEventListener(\"mousedown\", this._onMouseDown, true); // Capture!\n\n      win.removeEventListener(\"keydown\", this._onKeyDown, true); // Capture!\n\n      delete this._win;\n\n      _state.remove(this.id);\n    }\n  }\n\n  isDisposed() {\n    return !!this._win;\n  }\n  /**\r\n   * Updates all keyborg instances with the keyboard navigation state\r\n   */\n\n\n  update(isNavigatingWithKeyboard) {\n    var _a, _b;\n\n    const keyborgs = (_b = (_a = this._win) === null || _a === void 0 ? void 0 : _a.__keyborg) === null || _b === void 0 ? void 0 : _b.refs;\n\n    if (keyborgs) {\n      for (const id of Object.keys(keyborgs)) {\n        Keyborg.update(keyborgs[id], isNavigatingWithKeyboard);\n      }\n    }\n  }\n\n  _scheduleDismiss() {\n    const win = this._win;\n\n    if (win) {\n      if (this._dismissTimer) {\n        win.clearTimeout(this._dismissTimer);\n        this._dismissTimer = undefined;\n      }\n\n      const was = win.document.activeElement;\n      this._dismissTimer = win.setTimeout(() => {\n        this._dismissTimer = undefined;\n        const cur = win.document.activeElement;\n\n        if (was && cur && was === cur) {\n          // Esc was pressed, currently focused element hasn't changed.\n          // Just dismiss the keyboard navigation mode.\n          _state.setVal(false);\n        }\n      }, _dismissTimeout);\n    }\n  }\n\n}\n/**\r\n * Used to determine the keyboard navigation state\r\n */\n\n\nclass Keyborg {\n  constructor(win, props) {\n    this._cb = [];\n    this._id = \"k\" + ++_lastId;\n    this._win = win;\n    const current = win.__keyborg;\n\n    if (current) {\n      this._core = current.core;\n      current.refs[this._id] = this;\n    } else {\n      this._core = new KeyborgCore(win, props);\n      win.__keyborg = {\n        core: this._core,\n        refs: {\n          [this._id]: this\n        }\n      };\n    }\n  }\n\n  static create(win, props) {\n    return new Keyborg(win, props);\n  }\n\n  static dispose(instance) {\n    instance.dispose();\n  }\n  /**\r\n   * Updates all subscribed callbacks with the keyboard navigation state\r\n   */\n\n\n  static update(instance, isNavigatingWithKeyboard) {\n    instance._cb.forEach(callback => callback(isNavigatingWithKeyboard));\n  }\n\n  dispose() {\n    var _a;\n\n    const current = (_a = this._win) === null || _a === void 0 ? void 0 : _a.__keyborg;\n\n    if (current === null || current === void 0 ? void 0 : current.refs[this._id]) {\n      delete current.refs[this._id];\n\n      if (Object.keys(current.refs).length === 0) {\n        current.core.dispose(); // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n        delete this._win.__keyborg;\n      }\n    } else if (process.env.NODE_ENV === 'development') {\n      console.error(\"Keyborg instance \" + this._id + \" is being disposed incorrectly.\");\n    }\n\n    this._cb = [];\n    delete this._core;\n    delete this._win;\n  }\n  /**\r\n   * @returns Whether the user is navigating with keyboard\r\n   */\n\n\n  isNavigatingWithKeyboard() {\n    return _state.getVal();\n  }\n  /**\r\n   * @param callback - Called when the keyboard navigation state changes\r\n   */\n\n\n  subscribe(callback) {\n    this._cb.push(callback);\n  }\n  /**\r\n   * @param callback - Registered with subscribe\r\n   */\n\n\n  unsubscribe(callback) {\n    const index = this._cb.indexOf(callback);\n\n    if (index >= 0) {\n      this._cb.splice(index, 1);\n    }\n  }\n  /**\r\n   * Manually set the keyboard navigtion state\r\n   */\n\n\n  setVal(isNavigatingWithKeyboard) {\n    _state.setVal(isNavigatingWithKeyboard);\n  }\n\n}\nfunction createKeyborg(win, props) {\n  return Keyborg.create(win, props);\n}\nfunction disposeKeyborg(instance) {\n  Keyborg.dispose(instance);\n}\n\n/*!\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\nconst version = \"2.0.0\";\n\nexport { KEYBORG_FOCUSIN, Keyborg, createKeyborg, disposeKeyborg, getLastFocusedProgrammatically, nativeFocus, version };\n//# sourceMappingURL=keyborg.esm.js.map\n"],"names":["_canUseWeakRef","WeakRefInstance","instance","_a","_b","_c","KEYBORG_FOCUSIN","canOverrideNativeFocus","win","HTMLElement","origFocus","isCustomFocusCalled","_canOverrideNativeFocus","nativeFocus","element","focus","setupFocusEvent","kwin","data","e","target","event","details","keyborgNativeFocusEvent","disposeFocusEvent","proto","_dismissTimeout","_lastId","KeyborgState","keyborg","id","isNavigatingWithKeyboard","_state","KeyborgCore","props","keyCode","triggerKeys","doc","dismissKeys","keyborgs","Keyborg","was","cur","current","callback","index","createKeyborg","disposeKeyborg"],"mappings":"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"}